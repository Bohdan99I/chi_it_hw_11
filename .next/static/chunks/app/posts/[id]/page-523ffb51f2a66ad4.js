(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{8891:function(e,t,s){Promise.resolve().then(s.t.bind(s,1749,23)),Promise.resolve().then(s.t.bind(s,5250,23)),Promise.resolve().then(s.bind(s,4449))},4449:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var n=s(3827),a=s(4090),r=s(1126);function o(e){let{postId:t}=e,{data:s}=(0,r.useSession)(),[o,c]=(0,a.useState)([]),[i,l]=(0,a.useState)(""),[m,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{u()},[t]);let u=async()=>{try{let e=await fetch("/api/posts/".concat(t,"/comments")),s=await e.json();c(s)}catch(e){console.error("Error fetching comments:",e)}},h=async e=>{if(e.preventDefault(),s){d(!0);try{(await fetch("/api/posts/".concat(t,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:i})})).ok&&(l(""),u())}catch(e){console.error("Error posting comment:",e)}finally{d(!1)}}};return(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Comments"}),s&&(0,n.jsxs)("form",{onSubmit:h,className:"mb-6",children:[(0,n.jsx)("textarea",{value:i,onChange:e=>l(e.target.value),placeholder:"Write a comment...",className:"w-full p-2 border rounded-md",rows:3,required:!0}),(0,n.jsx)("button",{type:"submit",disabled:m,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:m?"Posting...":"Post Comment"})]}),(0,n.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,n.jsxs)("div",{className:"border-b pb-4",children:[(0,n.jsx)("div",{className:"flex justify-between items-start",children:(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.author}),(0,n.jsx)("p",{className:"text-gray-600 text-sm",children:new Date(e.createdAt).toLocaleDateString()})]})}),(0,n.jsx)("p",{className:"mt-2",children:e.content})]},e.id))})]})}}},function(e){e.O(0,[126,250,749,971,69,744],function(){return e(e.s=8891)}),_N_E=e.O()}]);